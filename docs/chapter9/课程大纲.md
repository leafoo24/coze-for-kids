# 第九章：哪吒的天气法术训练营

## 总体学习目标
1. 理解插件的基本概念与作用
2. 学会查找并配置天气API
3. 用简单代码处理用户输入与API返回数据
4. 调试插件并优化用户体验
5. 发布插件并分享成果

## 课程主线剧情：四海龙王的挑战
四海龙王正在各地兴风作浪，发动暴雨天灾！太乙真人派哪吒执行重要任务：收集全国各地的天气情报，监控龙王行动。学生将扮演哪吒的"法术顾问团"，帮助他使用Coze平台创建天气查询法术，成功完成任务！

## 关卡1：初识插件——哪吒的"魔法咒语"
### 学习目标
- 理解插件的概念和作用
- 认识Coze平台的基本操作界面
- 掌握创建简单插件的步骤

### 剧情任务
哪吒需要收集各地天气情报，但不会法术，需要借助"插件"这个"魔法咒语"。

### 教学活动
- **法宝与插件类比教学**：
  * 插件 = 哪吒的法宝（可装备的额外能力）
  * API = 法宝的核心功能（如混天绫能束缚、风火轮能飞行）
  * 参数 = 法宝的使用技巧（如风火轮的飞行高度、速度）
  * 调用插件 = 念动咒语激活法宝

- **神话小组讨论**：
  * "法宝训练营"：各小组为哪吒设计一件新法宝（插件），讨论它能解决什么问题
  * "神仙法宝配对"：讨论其他神话人物如孙悟空、二郎神等会用什么样的插件

- **动手实践**："法术学徒任务"
  * 学生扮演哪吒的法术学徒，使用Coze平台创建简单的"问候法术"插件
  * 体验插件节点如同组装法宝的不同部件
  * 完成后获得太乙真人（老师）授予的"初级法术师"称号

- **法宝效果演示**：
  * 老师示范如何将简单插件改造为具有神话特色的"神通"
  * 展示同一个插件在不同参数下的多种效果，如同哪吒灵活使用法宝

### 评估方式
- 能否解释插件的基本作用

## 关卡2：API对接——寻找"天气魔法书"
### 学习目标
- 理解API的基本概念与作用
- 掌握API密钥的获取与使用
- 学会配置API请求参数

### 剧情任务
哪吒找到"百度天气魔法书"（API文档），需要破解咒语格式和各种封印。

### 教学活动
- **生动比喻**：用"点外卖"类比API调用过程
- **实操演示**：申请百度地图API密钥
- **动手实践**：在Coze创建新插件，设置API地址和参数

### 评估方式
- 能否成功获取API密钥
- 能否配置正确的API请求参数

## 关卡3：编写与优化咒语——让哪吒施展完美法术
### 学习目标
- 掌握简单的数据转换逻辑
- 学会使用字典存储数据映射
- 掌握基本的代码调试方法
- 学会提取和美化API返回数据

### 剧情任务
哪吒需要应对两个挑战：理解人类语言（城市名而非编码）和优化法术表现（让法术结果更美观可靠）。就像哪吒必须掌握混天绫和乾坤圈的"使用口诀"，学生们也要掌握代码咒语，让API法宝为我所用。

### 教学活动
- **法宝与API类比教学**：讲解哪吒的法宝如何对应API功能
  * 混天绫（束缚API）→ 天气查询的参数约束
  * 风火轮（定位API）→ 城市位置查询功能
  * 乾坤圈（信息获取）→ 天气数据获取与展示

- **数据转换教学**：创建城市名到城市编码的映射字典
  * 比喻为"千里眼语言转换术"，将人类语言转为龙王能理解的代码

- **调试演示**：使用print()语句跟踪代码执行
  * 比喻为"顺风耳监听咒"，时刻监听法术执行过程中的状态

- **数据处理**：从API返回中提取关键天气信息
  * 比喻为"火尖枪精准取点"，只取出有用的天气信息核心
  
- **组合技演练**：将多个API功能组合调用
  * 如同哪吒同时使用多件法宝，将定位、天气查询和展示功能组合使用

### 评估方式
- 能否成功处理用户输入的城市名
- 能否优化天气数据的显示效果

## 关卡4：发布与分享——哪吒的"三界通告"
### 学习目标
- 掌握插件发布的完整流程
- 学会为插件编写清晰的使用说明
- 理解插件安全与隐私保护概念

### 剧情任务
哪吒成功收集天气情报，将插件发布到"三界商店"（Coze插件市场），供其他神仙使用。

### 教学活动
- **发布流程**：填写插件描述、设置权限、提交审核
- **使用场景**：设计并展示插件的创意应用场景
- **结果分享**：向全班展示自己的天气插件功能

### 评估方式
- 能否成功发布插件
- 插件的实用性与创意性

## 拓展活动
1. **天气卡片设计大赛**：设计最美观、最实用的天气信息展示卡片
2. **神话地点挑战**：为"花果山"、"东海龙宫"等神话地点添加特殊天气处理
3. **跨API联动**：尝试结合其他API，如节日API、名言API等，丰富天气插件功能
4. **AI对话优化**：调整插件输出，使大模型能提供更自然的天气对话体验

## 学习资源
- 百度地图API文档：https://lbsyun.baidu.com/faq/api?title=webapi/weather/base
- Python requests库参考：https://docs.python-requests.org/
- 表情符号参考：https://emojipedia.org/search/?q=weather
- 中国城市编码表：[weather_district_id.csv](./weather_district_id.csv)

## 成果展示
课程结束时，每位学生应具备：
1. 一个功能完善的天气查询插件
2. 对API调用和数据处理的基本理解
3. 解决实际问题的编程思维
4. 展示作品的自信与能力